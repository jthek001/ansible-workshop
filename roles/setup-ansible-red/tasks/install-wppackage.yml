---
- name: download WP
  get_url:
    url: 'https://wordpress.org/latest.zip'
    dest: "{{ workshop_web_path }}/latest.zip"
    mode: 0644
  tags:
  - wordpress

- name: "unarchive wordpress latest"
  unarchive:
    src: "{{ workshop_web_path }}/latest.zip"
    dest: "{{ workshop_web_path }}"
    remote_src: True
  tags:
  - wordpress

- name: "Create a new database {{ wpdbname }}"
  mysql_db:
    name: "{{ wpdbname }}"
    state: present
  tags:
  - wordpress

- name: "Create the user {{ wpdbuser }} for {{ wpdbname }}.*:ALL"
  mysql_user:
    host: localhost
    name: "{{ wpdbuser }}"
    password: "{{ wpdbpass }}"
    priv: "{{ wpdbname }}.*:ALL"
    update_password: always
    state: present
  tags:
  - wordpress

